{% extends 'base.html' %}

{% block title %}Library Tracker{% endblock %}

{% block js %}
<SCRIPT> 
    function del() { 
     var msg = "確定要刪除嗎？"; 
     if (confirm(msg)==true){ 
      return true; 
     }else{ 
      return false; 
     } 
    } 
</SCRIPT> 

{% endblock %}



{% block page_content %}

{% if current_user.is_authenticated %}
<div><h2 style="font-family: 'Roboto Slab', serif;">{{current_user.username}}的個人追縱清單</h1></div>

{% else %}
<div style="padding-top:5pt"><h2>使用說明</h2></div>
<div style="color: rgb(155, 155, 155);margin-bottom: 10px">本站未對行動裝置顯示最佳化，建議使用桌面版瀏覽器操作</div>
<div class="container"><h4>1. 至行天宮圖書館網站之藏館查詢首頁</h4>
網址：<a href="http://hylib.ht.org.tw/webpacIndex.jsp" target="_blank">http://hylib.ht.org.tw/webpacIndex.jsp</a>
</div>
<br>
<div class="container"><h4>2. 搜尋欲借閱書籍，並進入該書籍資料頁面</h4></div>
<br>
<div class="container"><h4>3. 複製書籍網址，或截取書籍id</h4>
<img src="{{ url_for('static', filename='url.png') }}" width="60%" alt="">
</div>
<div class="container" style="color: rgb(155, 155, 155); margin-top: 10px">
  藉由搜尋功能進入書籍資料頁面時，網址很可能會帶有其它參數，如：<br>
  http://hylib.ht.org.tw/bookDetail.do?id=192066<strong >&resid=188810387&nowid=1</strong><br>
  這些額外參數並不會造成影響，<strong>請直接複製整列網址</strong>
</div>
<br>
<div class="container"><h4>4. 至個人頁面新增書目</h4>
<img src="{{ url_for('static', filename='add.png') }}" width="70%" alt="">
</div>
<div class="container"><h4>5. 新增成功後，可至個人首頁檢視所有追縱書目</h4>
<img src="{{ url_for('static', filename='index.png') }}" width="80%" alt="">
</div>
<br>



{% endif %}


{% if current_user.is_authenticated %}

<table class="table table-striped">
  <thead class="thead-dark">
    <tr>
      <th scope="col">#</th>
      <th scope="col">書名 (ID)</th>
      <th scope="col">條碼號</th>
      <th scope="col">館藏地/室</th>
      <th scope="col">索書號</th>
      <th scope="col">資料類型</th>
      <th scope="col">目前狀態</th>
      <th scope="col">預約</th>
      <th scope="col">更新時間</th>
    </tr>
  </thead>
  <tbody>
  {% for book in books %}
    <tr>
      {% if book[1].copy=='1' %}
      <th scope="row">{{ book[0] }}</th>
      {% else %}
      <th scope="row"> </th>
      {% endif %}
      <td>{{ book[1].book_name }} <span style="color: rgb(155, 155, 155);padding-right:3px">{{ book[1].book_id }}</span>

        {% if book[1].copy=='1' %}
        <form action="" method="post" style='display:inline;'>
            {{ form.hidden_tag() }}
            <input id="book_id" name="book_id" type="hidden" value="{{ book[1].book_id }}">
            <input id="submit" name="submit" type="submit" value="刪除" class="btn btn-outline-dark btn-sm"
            onclick="javascript:return del()">
        </form>
        {% endif %}
      
      </td>
      <td>{{ book[1].barcode_id }}</td>
      <td>{{ book[1].location }}</td>
      <td>{{ book[1].call_number }}</td>
      <td>{{ book[1].data_type }}</td>
      <td>{{ book[1].status }}</td>
      <td>{{ book[1].reservation }}</td>
      <td>{{ (book[1].update_time + delta).strftime("%m-%d %H:%M") }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<br>

{% endif %}



{% endblock %}
